<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link th:href="@{css/publicMatching2.css}" rel="stylesheet" type="text/css"/>
</head>
<body>
	<div class="navbar" th:replace="~{common/navbar.html :: navbar}"></div>
	<main class="inner-content d-flex justify-content-center">
		<form class="w-50 text-center" action="publicMatching2.mc" method="post">		
			<div class="publicMatching-wrap text-center">
				<div class="w-100">
					<a href="home.do"><img class="logo-image mb-4" src="image/logo-removebg.png" width="300"></a>
					<h1 class="h3 mb-2 fw-bold text-center">공개 매칭 신청</h1>
					<div class="page-num mb-3">
						<img src="image/icon/1page.png"></img>
						<img src="image/icon/2page-color-green.png"></img>
						<img src="image/icon/3page.png"></img>
					</div>
					<div class="mb-5">
						<p><em>*</em> 아래 정보는 기존에 입력한 공개 매칭 설정 정보들입니다.<br>
						   <em>*</em> 아래 정보를 바탕으로 공개 매칭방이 생성됩니다. 정확하게 입력해주세요
						</p>
					</div>
				</div>
				<!-- <div class="text-start mb-3 text-center"><span class="mb-5">< <strong>김기룡</strong> 회원님의 정보 ></span></div> -->
				<div class="icon-wrap d-flex justify-content-center">
					<div class="icon-container d-flex flex-column" data-value="overDay" onclick="selectIcon(this)">
						   <img width="50" height="50" src="https://img.icons8.com/ios/50/calendar--v1.png" alt="calendar--v1"/>
						    <p class="fs-6">24시간 이상의<br>간병이 필요해요.</p>
					</div>
					<div class="icon-container d-flex flex-column" data-value="underDay" onclick="selectIcon(this)">
	  						<img width="50" height="50" src="https://img.icons8.com/ios/50/time--v1.png" alt="time--v1"/>
					   	 	<p class="fs-6">24시간 이상의<br>간병이 필요해요</p>
					</div>
				</div>
				
				<div id="overDayInput" class="input-field hidden d-flex">
					<div class="d-flex">
						<label for="startDate">시작 날짜 :&nbsp;&nbsp;&nbsp;</label>
					    <input type="date" placeholder="시작 날짜를 선택해주세요" name="startDate" id="startDate">
					</div>
					<div class="d-flex">
						<label for="startDate">종료 날짜 :&nbsp;&nbsp;&nbsp; </label>
						<input type="date" placeholder="종료 날짜를 선택해주세요" name="endDate" id=endDate>
					</div>
					<div id="dateDifference" style="margin-top: 10px; font-size: 0.9em; color: #666;">
				        날짜를 선택하면 기간이 표시됩니다.
				    </div>
				</div>
				
				<div id="underDayInput" class="input-field-row hidden">
					<div class="border-end ms-2">
						<div class="d-flex me-3 mb-3">
							<label for="startDate">시작 날짜 :&nbsp;&nbsp;</label>
					    	<input type="date" placeholder="날짜를 선택해주세요" name="singleDate">
					    </div>
					    <div class="d-flex">
					    	<label for="startDate">시작 시간 :&nbsp;&nbsp;</label>
					    	<input type="time" placeholder="시작 시간을 선택해주세요" name="startTime">
				        </div>
					</div>
					<div class="ms-2">
						<div class="d-flex me-3 mb-3">
							<label for="startDate">종료 날짜 :&nbsp;&nbsp;</label>
					    	<input type="date" placeholder="날짜를 선택해주세요" name="singleDate">
					    </div>
					    <div class="d-flex">
					    	<label for="startDate">종료 시간 :&nbsp;&nbsp;</label>
					    	<input type="time" placeholder="시작 시간을 선택해주세요" name="startTime">
				        </div>
					</div>
					
			        
				    
				    
				    
				</div>
				
				<div class="basic-info-wrap d-flex justify-content-center">
					<div class="basic-info">
							<div class="form-floating mb-3">
								<input type="text" class="form-control" id="floatingInput" name="memberId">
								<label for="floatingInput">이름</label>
							</div>
							<div class="form-group mb-3">
	                            <div class="radio-group">
	                                <input type="radio" id="male" name="memberGender" value="남성" class="btn-check">
	                                <label for="male" class="btn-radio">남성</label>
	                                
	                                <input type="radio" id="female" name="memberGender" value="여성" class="btn-check">
	                                <label for="female" class="btn-radio">여성</label>
	                            </div>
                        	</div>
							<div class="form-floating d-flex mb-3">
								<input type="text" class="form-control" id="floatingPassword" name="memberAge">
								<label for="floatingPassword">나이</label><p class="mt-2">세</p>
							</div>
							<div class="form-floating d-flex mb-3">
								<input type="text" class="form-control" id="floatingPassword" name="memberHeight">
								<label for="floatingPassword">키</label><p class="mt-2">cm</p>
							</div>
							<div class="form-floating d-flex mb-3">
								<input type="text" class="form-control" id="floatingPassword" name="memberWeight">
								<label for="floatingPassword">몸무게</label><p class="mt-2">kg</p>
							</div>
							<div class="form-floating mb-3">
								<input type="text" class="form-control" id="floatingPassword" name="memberDisase">
								<label for="floatingPassword">진단명</label>
							</div>
					</div>
				</div>			
				
<!--                		<div class="d-flex">
               			<div class="me-5"><em>* </em><span class="mb-3">원하는 간병인 경력 </span><br></div>
	               		<div class="btn-group-sm" role="group" aria-label="Basic example">
		               			<button type="button" class="btn btn-outline-success">치매</button>
								<button type="button" class="btn btn-outline-success">호흡기 질환</button>
								<button type="button" class="btn btn-outline-success">거동 불편</button>
								<button type="button" class="btn btn-outline-success">외상환자</button>
								<button type="button" class="btn btn-outline-success">파킨슨</button>
								<button type="button" class="btn btn-outline-success">수면질환</button>
								<button type="button" class="btn btn-outline-success">정신질환</button>
								<button type="button" class="btn btn-outline-success">기저귀 케어</button>
								<button type="button" class="btn btn-outline-success">재활</button>
						</div>
               		</div> -->
               	<div class="sign-btn mt-5 d-flex justify-content-center">
					<button type="submit" class="apply-btn me-3"><span>다음</span></button>
				</div>	
			</div>	
		</form>
	</main>
	<div class="footer" th:replace="~{common/footer.html :: footer}"></div>
	<script>
		function selectIcon(element) {
		    // 모든 아이콘에서 'selected' 클래스 제거
		    document.querySelectorAll('.icon-container').forEach(icon => {
		        icon.classList.remove('selected');
		    });
		    
		    // 클릭된 아이콘에 'selected' 클래스 추가
		    element.classList.add('selected');
	
		    // 선택된 값 (예: 'overDay' 또는 'underDay')
		    const selectedValue = element.getAttribute('data-value');	
		    
		    const overDayInput = document.getElementById('overDayInput');
		    const underDayInput = document.getElementById('underDayInput');
	
		    // 모든 입력 필드 숨기기
		    overDayInput.classList.add('hidden');
		    underDayInput.classList.add('hidden');
	
		    // 선택된 입력 필드 표시
		    if (selectedValue === 'overDay') {
		        overDayInput.classList.remove('hidden');
		    } else if (selectedValue === 'underDay') {
		        underDayInput.classList.remove('hidden');
		    }
		}

	// 페이지 로드 시 실행
	document.addEventListener('DOMContentLoaded', function() {
	    const icons = document.querySelectorAll('.icon-container');
	    icons.forEach(icon => {
	        icon.addEventListener('click', function() {
	            selectIcon(this);
	        });
	    });
	    
	    const startDateInput = document.getElementById('startDate');
	    const endDateInput = document.getElementById('endDate');
	    const dateDifferenceDiv = document.getElementById('dateDifference');

	    function updateDateDifference() {
	        const startDate = new Date(startDateInput.value);
	        const endDate = new Date(endDateInput.value);

	        if (startDate && endDate && startDate <= endDate) {
	            const diffTime = Math.abs(endDate - startDate);
	            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1; // +1 to include both start and end dates
	            dateDifferenceDiv.innerHTML = `총 간병 기간<br> <span style="font-size: 1.5em; color: #2ecc71; font-weight: bold;">${diffDays}일</span>`;
	        } else if (startDate > endDate) {
	            dateDifferenceDiv.innerHTML = '<small style="color: red;">종료 날짜는 시작 날짜 이후여야 합니다.</small>';
	        } else {
	            dateDifferenceDiv.innerHTML = '<small>날짜를 선택하면 기간이 표시됩니다.</small>';
	        }
	    }

	    startDateInput.addEventListener('change', updateDateDifference);
	    endDateInput.addEventListener('change', updateDateDifference);
	});
	</script>
</body>
</html>